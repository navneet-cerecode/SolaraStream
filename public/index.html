<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#0f2027">
    <title>Glass Watch Party</title>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>

    <div class="glass-bg"></div>
    <div id="toastContainer"></div>

    <div id="lobby" class="glass-panel">
        <h1>üçø WatchParty</h1>
        <p>Stream Together. Anytime.</p>
        
        <div class="input-group">
            <input type="text" id="usernameInput" placeholder="Your Nickname" autocomplete="off" />
            <input type="text" id="roomInput" placeholder="Room Key (e.g. Cinema)" autocomplete="off" />
        </div>
        
        <button id="joinBtn" class="primary-btn">Join Party</button>
    </div>

    <div id="videoRoom" style="display: none;">
        
        <div class="glass-header">
            <h2 id="roomDisplay">Room</h2>
            <div class="header-actions">
                <button id="leaveBtn" class="icon-btn danger" title="Leave">‚úï</button>
            </div>
        </div>

        <div class="player-container">
            <video id="mainMovie" controls playsinline></video>
        </div>

        <div id="videoGrid"></div>

        <div class="glass-toolbar">
            <button class="text-btn" onclick="toggleMic()" id="micBtn">üé§ Mute</button>
            <button class="text-btn" onclick="toggleCam()" id="camBtn">üì∑ Stop Video</button>
            
            <div class="divider"></div>

            <button class="text-btn" onclick="toggleMeetingMode()" id="meetBtn">üë• Meeting Mode</button>
            
            <div class="divider"></div>

            <button class="text-btn" onclick="toggleSelfView()" id="selfViewBtn">üë§ My Cam</button>
            <button class="text-btn" onclick="toggleFaces()" id="toggleFacesBtn">üëÅÔ∏è Hide Faces</button>
            <button class="text-btn" onclick="toggleChat()" id="toggleChatBtn">üí¨ Chat</button>
            <button class="text-btn" onclick="togglePartyFullscreen()">‚õ∂ Fullscreen</button>
        </div>

        <div id="chatContainer" class="glass-panel">
            <div id="chatHeader">Live Chat</div>
            <div id="chatMessages"></div>
            <div id="chatInputArea">
                <input type="text" id="chatInput" placeholder="Type a message..." autocomplete="off">
                <button id="sendBtn">‚û§</button>
            </div>
        </div>

        <div class="control-panel glass-panel">
            <div class="upload-section">
                <h3>Add to Library</h3>
                <div class="upload-row">
                    <label class="file-upload">
                        <span>Choose Video</span>
                        <input type="file" id="videoInput" accept="video/*">
                    </label>
                    <label class="file-upload">
                        <span>Choose Poster</span>
                        <input type="file" id="imageInput" accept="image/*">
                    </label>
                    <button id="uploadBtn" class="primary-btn small">Upload</button>
                </div>
            </div>
            
            <h3>Available Movies</h3>
            <div id="movieGrid" class="movie-grid">
                <p style="color: #aaa;">Loading...</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>